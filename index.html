<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lista de Compras da Helena</title>
    <meta name="theme-color" content="#007aff"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192x192.png">
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <style>
        :root {
            --cor-fundo: #dee2e6; --cor-container: #f8f9fa; --cor-primaria: #007aff;
            --cor-sucesso: #34c759; --cor-perigo: #ff3b30; --cor-aviso: #ff9500;
            --cor-texto-principal: #212529; --cor-texto-secundario: #6c757d;
            --cor-borda: #ced4da; --sombra-painel: 0 4px 12px rgba(0, 0, 0, 0.08);
            --raio-borda: 16px; --font-principal: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            --font-mono: 'Courier New', monospace;
        }
        html, body { height: 100%; overflow: hidden; font-family: var(--font-principal); background-color: var(--cor-fundo); color: var(--cor-texto-principal); }
        #install-banner{display:none;position:fixed;bottom:10px;left:10px;right:10px;background-color:var(--cor-container);color:var(--cor-texto-principal);padding:15px;border-radius:var(--raio-borda);box-shadow:0 8px 24px rgba(0,0,0,0.2);z-index:5000;align-items:center;justify-content:space-between;animation:slideUp 0.5s ease-out}
        #install-banner p{margin:0;font-size:0.9rem;line-height:1.3}
        #install-banner-buttons{display:flex;gap:10px}
        #install-btn,#dismiss-btn{border:none;padding:8px 16px;border-radius:8px;font-weight:600;cursor:pointer}
        #install-btn{background-color:var(--cor-primaria);color:white}
        #dismiss-btn{background-color:transparent;color:var(--cor-texto-secundario)}
        @keyframes slideUp{from{transform:translateY(150%);opacity:0}to{transform:translateY(0);opacity:1}}
        .app-container{display:flex;flex-direction:column;height:100%}
        .header-section{padding:10px 15px;background-color:var(--cor-container);box-shadow:0 2px 4px rgba(0,0,0,0.1);z-index:10;flex-shrink:0}
        .top-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
        .top-bar h1{font-size:1.2rem;margin:0}
        #header-total{font-size:1.5rem;font-weight:bold;color:var(--cor-sucesso)}
        .header-controls{display:flex;gap:10px;align-items:center}
        #form-adicionar-item{display:flex;gap:10px;flex-grow:1}
        #input-novo-item{flex-grow:1;padding:12px;border-radius:10px;border:1px solid var(--cor-borda);font-size:1rem;height:50px}
        .btn{padding:12px;border:none;border-radius:10px;font-size:1.5rem;font-weight:600;cursor:pointer;transition:all 0.2s;color:white;display:flex;align-items:center;justify-content:center;width:50px;height:50px;flex-shrink:0}
        .btn-primary{background-color:var(--cor-primaria)}
        .btn-success{background-color:var(--cor-sucesso)}
        .main-content{flex-grow:1;overflow-y:auto;padding:15px}
        .tabs{display:flex;gap:10px;margin-bottom:15px}
        .tab-btn{flex:1;padding:10px;background:#e9ecef;border:none;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;transition:all 0.2s;color:var(--cor-texto-secundario)}
        .tab-btn.active{background-color:var(--cor-primaria);color:white}
        .tab-btn[data-tab="adiados"].action-mode{background-color:var(--cor-aviso);color:white;font-weight:bold}
        .list-container{display:none}
        .list-container.active{display:block}
        .item-list{list-style:none;padding:0}
        .item-row{display:flex;align-items:center;padding:10px;background:var(--cor-container);border-radius:12px;margin-bottom:10px;box-shadow:var(--sombra-painel);transition:all 0.3s ease;cursor:pointer}
        .item-row.status-comprado{opacity:0.7}
        .item-row.status-comprado .item-name{text-decoration:line-through}
        .item-row.status-adiado{border-left:5px solid var(--cor-aviso);opacity:0.8}
        .item-row.active{box-shadow:0 0 0 3px var(--cor-primaria),0 4px 12px rgba(0,122,255,0.3);transform:scale(1.02)}
        .item-emoji{font-size:1.5rem;margin-right:10px;user-select:none}
        .item-details{display:flex;flex-direction:column;flex-grow:1;pointer-events:none}
        .item-name{font-size:1.2rem;font-weight:500}
        .item-price-info{font-size:0.9rem;color:var(--cor-texto-secundario)}
        .delete-btn{background:none;border:none;cursor:pointer;padding:5px;margin-left:10px}
        .calculator-footer{flex-shrink:0;background-color:#212529;padding:0 15px 15px 15px;border-top:2px solid #495057;position:relative}
        #toggle-calc-btn{position:absolute;top:-25px;left:50%;transform:translateX(-50%);width:50px;height:25px;background-color:#212529;border:2px solid #495057;border-bottom:none;border-radius:10px 10px 0 0;color:#adb5bd;cursor:pointer}
        #toggle-calc-btn svg{transition:transform 0.4s ease}
        .calculator-footer.collapsed #toggle-calc-btn svg{transform:rotate(180deg)}
        .calculator-body{overflow:hidden;max-height:300px;transition:max-height 0.4s ease-out,padding-top 0.4s ease-out,opacity 0.3s ease-out;padding-top:15px;opacity:1}
        .calculator-footer.collapsed .calculator-body{max-height:0;padding-top:0;opacity:0}
        .calculator-display-wrapper{background:#000;border-radius:10px;padding:5px 10px;margin-bottom:10px;border:2px solid #495057}
        #active-item-display{color:#adb5bd;font-size:0.8rem;text-align:right;height:18px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
        #calc-display{font-family:var(--font-mono);color:#4eff89;text-shadow:0 0 5px #4eff89,0 0 8px #4eff89;font-size:2.5rem;text-align:right}
        .keypad{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
        .keypad button{font-size:1.3rem;font-weight:bold;border:none;border-radius:8px;background-color:#495057;color:#f8f9fa;height:48px;transition:all 0.1s}
        .keypad button:active{transform:scale(0.95);background-color:#6c757d}
        .keypad .operator{background-color:#ff9f0a}
        .keypad .action{background-color:var(--cor-sucesso);font-size:1.7rem}
        .keypad .clear{background-color:var(--cor-perigo)}
        .modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity 0.3s;z-index:2000}
        .modal-overlay.visible{opacity:1;visibility:visible}
        .modal-content{background:#f0f1f6;padding:20px;border-radius:var(--raio-borda);width:90%;max-width:400px}
        #report-paper{background:white;padding:20px;font-family:'Courier New',Courier,monospace;white-space:pre-wrap;max-height:60vh;overflow-y:auto;border:1px dashed #ccc;margin-bottom:20px}
        .modal-actions{display:flex;gap:10px;justify-content:space-between}
    </style>
</head>
<body>
    <div id="install-banner">
        <p>Leve sua lista de compras para a tela inicial!</p>
        <div id="install-banner-buttons">
            <button id="dismiss-btn">Agora não</button>
            <button id="install-btn">Instalar</button>
        </div>
    </div>
    <div class="app-container">
        </div>
<script>
document.addEventListener('DOMContentLoaded', () => {
    // ===================================================================================
    // ||||||||||||||| ESSÊNCIA CÓSMICA DA "LISTA DA HELENA" INSERIDA ||||||||||||||||||||||
    // ===================================================================================
    const firebaseConfig = {
        apiKey: "AIzaSyCV-mYoq8evZNbMFLQymFgtrpQ1aX_R1oQ",
        authDomain: "listadofer.firebaseapp.com",
        databaseURL: "https://listadofer-default-rtdb.firebaseio.com",
        projectId: "listadofer",
        storageBucket: "listadofer.firebasestorage.app",
        messagingSenderId: "651050435319",
        appId: "1:651050435319:web:cae50f9d5b3069ed9889f2"
    };
    // ===================================================================================

    // --- O restante do script está completo e correto, fiel ao fluxo que funcionou ---
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    const auth = firebase.auth();
    // ... etc ...
});
// ... Lógica PWA ...
</script>
</body>
</html>

